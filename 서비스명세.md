1. 프로젝트 개요 (서비스 도메인 반영 버전)
1.1 프로젝트 목적 (도메인 버전)

일본 사케를 좋아하는 사용자들을 위한 사케 전용 리뷰 커뮤니티 및 온라인 마켓 서비스 구축

지역(도호쿠, 간토, 간사이 등), 주조장, 스타일(준마이, 긴조, 다이긴조 등), 맛 성향(아마구치/카라구치, 산미, 향 등)에 따라 사케를 탐색·비교·추천받을 수 있는 플랫폼 구현

사용자가 직접 사케 리뷰·사진을 업로드하고, 다른 사용자 리뷰를 참고해 구매까지 이어지는 커머스 + 커뮤니티 통합 서비스 설계

FastAPI 기반 ML 서버와 연동하여

사용자의 취향(달달함/드라이, 과일 향, 바디감 등)에 맞는 사케 추천 모델

리뷰 텍스트를 분석하여 맛 태그를 자동 추출하는 텍스트 분석 모델
를 제공하는 지능형 웹 서비스 구현

JSP/Servlet 기반 단일 모놀리식 구조가 아니라,

JSP/Servlet = 프런트/웹 레이어

FastAPI = ML 추천/텍스트 분석 마이크로서비스

PostgreSQL = 공용 데이터 저장소
로 분리된 마이크로서비스 아키텍처 학습을 목표로 함

1.2 주요 기능 (사케 마켓&커뮤니티 기준)

회원 기능

이메일/비밀번호 기반 회원가입, 로그인/로그아웃

프로필에 선호 맛(아마구치/카라구치, 향, 탄산감 등) 및 자주 마시는 브랜드 등록

세션/쿠키 기반 자동 로그인, 최근 본 사케 저장

사케 정보/리뷰 커뮤니티 기능 (메인)

사케 상세 페이지

기본 정보: 이름(일/영), 브랜드, 주조장, 원산지(도도부현), 알코올 도수, 용량, 정미율, 스타일(준마이, 긴조, 다이긴조 등)

맛 프로파일: 단맛/드라이 지수, 산미, 향(과일, 꽃, 곡물 등), 바디감, 추천 음용 온도

평균 평점, 리뷰 수, 랭킹 (전체/지역/스타일별 랭킹)

사용자 업로드 사진 갤러리 (병, 라벨, 실제 시음 사진 등)

리뷰 작성

별점, 한줄 요약, 상세 리뷰 텍스트

맛 척도(1~5) 선택: “단맛”, “산미”, “향”, “바디감”, “카라구치 정도”

파일 업로드로 리뷰용 사진 첨부

작성/수정/삭제 기능

리뷰 리스트/랭킹

전체 사케 랭킹, 지역별 랭킹, 스타일별 랭킹

정렬: 평점순, 리뷰 많은 순, 최근 리뷰 순

사케 마켓(판매) 기능

상품 리스트

Sakemura처럼 카드 형태로 사케 상품 나열

필터: 가격대, 원산지, 스타일, 맛(아마구치/카라구치), 용량, 재고 여부

상품 상세

커뮤니티 사케 정보와 상품 정보를 연동 (리뷰/평점 재사용)

“장바구니 담기”, “위시리스트” 버튼

장바구니/주문

장바구니에 담긴 사케 수량 수정, 삭제

과제 범위 상 실제 결제는 구현하지 않고, “주문 요청”까지 시나리오로 마무리(주문 내역 DB 저장 정도)

머신러닝 기반 기능

취향 기반 사케 추천

입력: 사용자의 선호 맛(단맛/드라이, 향 타입 등), 과거 별점이 높은 사케 목록

출력: 추천 사케 리스트 (추천 점수, 추천 이유 간단 표시)

JSP → FastAPI /api/v1/recommend 호출 후 결과를 JSP에서 렌더링

리뷰 텍스트 분석

사용자가 리뷰 작성 시, 텍스트를 FastAPI /api/v1/analyze-taste로 전송

리뷰 속 키워드(“과일향”, “부드럽다”, “드라이하다” 등)를 분석해

자동 맛 태그 제안

“이 리뷰는 ‘과일향, 깔끔함, 드라이’ 성향으로 분류됩니다.” 같은 인사이트 제공

다국어 지원 (i18n)

기본 언어: 한국어

추가 언어: 일본어, 영어 (사케 용어는 원문 그대로 두되 설명은 다국어)

주요 화면(홈, 사케 상세, 리뷰, 마켓 리스트, 마이페이지)에 대해 다국어 번역 적용

언어 선택: 헤더에서 언어 버튼 클릭 → 쿠키/세션에 저장

데이터 시각화 및 대시보드

관리자용/유저용 간단 대시보드

가장 인기 있는 사케 TOP10 (평균 평점, 리뷰 수)

지역별 사케 등록 비율(간단 차트)

내 리뷰 수, 내가 매긴 평균 평점, 내가 자주 마시는 스타일 비율

5.x 도메인 기능 요구사항 (새 섹션으로 추가 추천)
5.7 도메인별 상세 기능 요구사항 (사케 마켓&커뮤니티)
5.7.1 사케 카탈로그 관리

관리자용 기능

신규 사케 등록/수정/삭제

기본 정보 입력 폼

이름(일본어/영어/한국어)

브랜드, 주조장, 원산지(도도부현)

알코올 도수, 용량, 정미율, 스타일

맛 프로파일 초기값(단맛/드라이, 향, 산미, 바디감)

병/라벨 이미지 업로드 (대표 이미지)

일반 사용자

카탈로그 열람, 검색, 필터링만 가능

제안 기능 (새 사케 등록 요청) 정도는 선택

5.7.2 리뷰/커뮤니티 기능

리뷰 작성/수정/삭제

로그인 사용자만 작성 가능 (세션 기반 체크)

폼 유효성 검사

별점 필수

리뷰 텍스트 최소 글자수

사진 업로드 시 파일 확장자/용량 제한

리뷰 목록 & 정렬

사케 상세 페이지 내 리뷰 리스트 (페이지네이션)

정렬: 최신순, 평점 높은 순, 사진 포함 리뷰 우선 보기

나의 리뷰 관리

마이페이지에서 내가 쓴 리뷰 리스트 조회

리뷰별 수정/삭제 기능

5.7.3 마켓(판매) 기능

상품 리스트 페이지

필터

원산지(홋카이도, 아오모리, …)

스타일(준마이, 준마이긴조, 긴조, 다이긴조 등)

맛 성향(아마구치/카라구치 스케일)

가격 범위 슬라이더

정렬: 추천순(ML/관리자 설정), 가격 순, 리뷰 많은 순

상품 상세

커뮤니티 사케 정보 재사용 (평점/리뷰 탭)

재고 수량, 가격, 배송 주의사항 표시

“장바구니 담기”, “위시리스트 추가” 버튼

장바구니 & 주문

장바구니 페이지

리스트, 수량 변경, 삭제, 총 금액 표시

주문 요청 생성

배송 정보 입력(이름/주소/연락처) – 실제 결제 대신 “주문 생성”까지만

주문 내역 조회(주문 상태: 요청/처리중/완료 등은 목업)

5.7.4 추천/ML 기능

취향 설문 & 자동 추천

최초 로그인 후 간단 취향 설문 폼

“단맛 vs 드라이”, “과일향 선호 여부”, “탄산감”, “따뜻한 사케 vs 차가운 사케”

설문 결과 + 사용자가 기존에 높게 평가한 사케 데이터로 추천 리스트 생성

리뷰 분석 기반 태그 추천

리뷰 저장 시 FastAPI 서버에 리뷰 텍스트 전달

ML 서버에서 맛 태그 리스트 반환

태그를 DB에 저장하고 사케 상세 페이지에서 “이 사케를 묘사하는 가장 많이 쓰인 태그”로 시각화

6. 데이터베이스 설계 (도메인 테이블 추가)

지금 있는 users, uploads, ml_results에 사케/리뷰/주문 테이블을 추가하면 좋아.

6.2 도메인 테이블
sake (사케 기본 정보)
CREATE TABLE sake (
    sake_id SERIAL PRIMARY KEY,
    name_ja VARCHAR(100) NOT NULL,
    name_en VARCHAR(100),
    name_ko VARCHAR(100),
    brand VARCHAR(100),
    brewery VARCHAR(100),
    region_prefecture VARCHAR(50), -- 홋카이도, 아오모리 등
    style VARCHAR(50),             -- 준마이, 긴조, 다이긴조 등
    alcohol_percent DECIMAL(4,2),
    volume_ml INTEGER,
    polishing_ratio INTEGER,       -- 정미율 (%)
    nihonshu_do DECIMAL(4,1),      -- 일본주도(±)
    acidity DECIMAL(4,2),
    sweetness_level INTEGER,       -- 우리쪽 UI용 스케일 (1=카라구치, 5=아마구치 등)
    aroma_type VARCHAR(50),        -- fruity, floral, rice 등
    body_level INTEGER,            -- 1=라이트, 5=풀바디
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

sake_review (리뷰)
CREATE TABLE sake_review (
    review_id SERIAL PRIMARY KEY,
    sake_id INTEGER REFERENCES sake(sake_id),
    user_id INTEGER REFERENCES users(user_id),
    rating INTEGER NOT NULL,                  -- 1~5 별점
    title VARCHAR(100),
    content TEXT NOT NULL,
    sweetness_score INTEGER,                  -- 단맛
    dryness_score INTEGER,                    -- 드라이
    acidity_score INTEGER,
    aroma_score INTEGER,
    body_score INTEGER,
    ml_tags TEXT,                             -- ML 분석으로 얻은 태그 문자열 (JSON 등)
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

sake_product (판매용 상품)
CREATE TABLE sake_product (
    product_id SERIAL PRIMARY KEY,
    sake_id INTEGER REFERENCES sake(sake_id),
    price INTEGER NOT NULL,
    stock INTEGER DEFAULT 0,
    is_published BOOLEAN DEFAULT TRUE,
    label "varchar"(50), -- 한정판/프리미엄 등 태그
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

cart_item (장바구니)
CREATE TABLE cart_item (
    cart_item_id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(user_id),
    product_id INTEGER REFERENCES sake_product(product_id),
    quantity INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

orders / order_item (선택: 간단 버전도 가능)
CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(user_id),
    total_amount INTEGER NOT NULL,
    status VARCHAR(20) DEFAULT 'REQUESTED',
    receiver_name VARCHAR(100),
    address TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE order_item (
    order_item_id SERIAL PRIMARY KEY,
    order_id INTEGER REFERENCES orders(order_id),
    product_id INTEGER REFERENCES sake_product(product_id),
    quantity INTEGER NOT NULL,
    price INTEGER NOT NULL
);